# アプリケーション仕様書（テンプレート）

> このファイルは第一段階（仕様策定）で更新する、仕様書の雛形です。各項目を埋めていき、合意形成後に最新版として維持します。

## メタ情報
- プロジェクト名: TBD（要確認）
- バージョン: 0.1.0-draft
- 最終更新日: 2025-11-10
- 作成者: GitHub Copilot（App_Builder）

## 概要
- コンセプト: ITサービスのステータスページのように、日々のルーチン達成状況を一目で判定する時間管理サポートアプリ
- 目的（解決したい課題）: 毎日のルーチンを設定した目標時刻どおりに実行できたかを簡単に把握し、時間管理が苦手な人でも継続しやすい仕組みを提供する
- 背景・文脈: ToDoアプリ的なシンプルさを保ちつつ、目標時間との差分を色とアイコンでフィードバックしてモチベーション維持を促す

## ターゲットユーザー・ペルソナ
- 主要ペルソナ: 時間管理が苦手な人（特にADHD傾向のある社会人・学生）
- ユーザー課題: ルーチンの開始・終了時刻が守れず、毎回自分で振り返る手間や達成状況の把握が難しい
- 利用シナリオ: 朝の支度や就寝前のルーチンを登録し、完了時にボタンを押して達成状況をステータス表示で確認する

## ユースケース一覧
- UC-01: ルーチンを新規登録・編集し、目標時刻や許容ズレ時間を設定する
- UC-02: ルーチン実行後に完了ボタンを押し、実績時刻を記録する
- UC-03: トップ画面で各ルーチンの達成ステータス（オンタイム／注意／警告）を確認する

## スコープ定義
- In-Scope（今回対象）: ルーチン登録・一覧表示・完了登録・ステータス判定UI、オンタイム判定閾値の個別設定、基本的な設定画面
- Out-of-Scope（今回対象外）: ソーシャル共有、通知・アラーム連携、詳細レポートや長期的な統計分析、管理者が複数ユーザーの状況を一括監視する機能（将来検討）

## 機能要件（機能定義）
- ルーチン管理
  - 説明: ルーチン名・目標時刻・許容ズレ時間を登録／編集／削除できる
  - 受け入れ基準: 必須項目のバリデーションを通過した入力で保存でき、一覧に即時反映される
  - 依存関係: 永続化（ストレージ）
- ルーチン完了記録
  - 説明: 完了ボタンを押すことで実績時刻を記録する
  - 受け入れ基準: ボタン押下時の時刻が保存され、判定ロジックが動作する
  - 依存関係: ルーチン管理
- ステータス判定・表示
  - 説明: 目標時刻との比較でオンタイム（緑チェック）、軽微遅延（黄エクスクラメーション）、大幅遅延（赤バツ）を判定しトップ画面に表示
  - 受け入れ基準: 設定した許容ズレ時間内で緑、それを超えるが大幅閾値未満で黄、大幅閾値以上で赤となる（大幅閾値は暫定TBD）
  - 依存関係: ルーチン完了記録、設定管理
- 設定管理
  - 説明: オンタイム判定の閾値（例: 5分以内で緑、15分以内で黄など）をユーザーが設定画面で調整できる
  - 受け入れ基準: 設定値を保存し、以降の判定ロジックに反映される
  - 依存関係: ルーチン管理

## 画面設計（概要）
- 主要画面: トップ（ステータス一覧）、ルーチン編集モーダル／画面、設定画面
- 画面遷移（テキスト／図示可）: トップ → ルーチン編集（新規・更新）、トップ → 設定
- ナビゲーション原則: シンプルな下部またはトップメニューは持たず、トップ画面からモーダルやページ遷移で操作する

## データ要件
- エンティティ定義（名称／属性／型／制約）: ルーチン（id、name、targetTime、allowableDelayMinutes、criticalDelayMinutes?、status、lastCompletedAt）
- バリデーション要件: ルーチン名必須、目標時刻必須、許容ズレ時間は0以上、criticalDelayMinutesはallowableDelayMinutes以上
- 永続化・保存戦略: ローカルストレージ Driftを使用

## 非機能要件
- 性能（応答時間／安定性）: 操作からフィードバックまで1秒未満、オフラインでも即時操作可能
- セキュリティ（認可・認証・データ保護）: 当面ユーザーアカウントなし、端末内データの保護を前提
- 可用性・運用: 単一端末利用を想定、同期機能は範囲外
- アクセシビリティ: 視覚的ステータス差が明確になる配色とアイコンの併用

## 技術選定（参照）
- ドキュメント: `AI/architecture/technology_stack.md`
- 主な採用技術（言語／フレームワーク／主要ライブラリ）: Flutter（Dart）、状態管理にRiverpod、ローカルストレージにDrift

## リスク・前提・制約
- 主要リスク: 設定可能な閾値の理解負荷が高まる可能性、ローカルストレージ選定による実装コスト
- 重要前提: マルチデバイス同期や通知は初期リリース対象外、想定ユーザー数は少人数（家族・チーム単位）でスケール対応は後続検討
- 制約条件: UIはステータスサイト風の緑／黄／赤を基調にしたデザイン

## 依存関係
- 外部API／サービス: 現時点なし
- ライブラリ／プラグイン: `AI/architecture/technology_stack.md`を使用

## マイルストーン（仕様策定観点）
- M1: 仕様草案提示（2025-11-12 目標）
- M2: 詳細化・合意（2025-11-14 目標）
- M3: 第二段階へ移行（仕様合意後に構造計画へ移行）

## 受け入れ基準（全体）
- 合意文言: 「仕様内容に合意し、構造計画へ進む」
- 必要ドキュメント: 本仕様書最新版、補助資料（必要に応じて）

## 更新履歴
- 2025-11-10: テンプレート初期値入力
- 2025-11-10: 仕様草案初稿（コンセプト／要件追記）
- YYYY-MM-DD: 合意版更新

## 参考・関連
- プロセス詳細（第一段階）:
  - `AI/instructions/new_app/001/project_rules_stage1_step1.md`
  - `AI/instructions/new_app/001/project_rules_stage1_step2.md`
  - `AI/instructions/new_app/001/project_rules_stage1_step3.md`
  - `AI/instructions/new_app/001/project_rules_stage1_step4.md`
- 上位方針: `AI/instructions/project_rules.md`
- アーキテクチャ規約: `AI/architecture/lib/features/features_architecture.md`
