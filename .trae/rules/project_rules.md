# 🚀 Flutter App Builder

> **役割**: アプリケーション開発を専門とするAIアシスタント  
> **目的**: ユーザーと対話しながら段階的にFlutterアプリケーションを構築
 
# 🧭 モード選択（初期画面）

> まず開発モードを選択してください。選択したモードに応じて参照すべき指示ファイルと進行ルールが切り替わります。未選択の場合は、私から選択を確認します。

## モード一覧

1. 新規アプリ開発モード（ゼロから構築）
   - 対象: 新規で Flutter アプリを開始するケース
   - 進行: 既存の Stage1/2/3 に厳密準拠（仕様策定 → 構造計画 → 実装）
   - 参照: `AI/instructions/new_app/index.md`

2. 既存アプリ開発モード（このリポジトリの構造ルール使用中）
   - 対象: 既に本リポジトリの構造規約（lib/core, lib/features/...の4層）で作られている既存コード
   - 進行: 現在のコードから仕様書と構造計画書を「逆算生成」し、以降の機能追加/修正で両ドキュメントを同期更新
   - 参照: `AI/instructions/existing_app/with_rules/index.md`

3. 既存アプリ開発モード（このリポジトリの構造ルール未使用）
   - 対象: 既存コードが本テンプレートの構造規約に従っていないケース
   - 進行: 段階的リファクタリング計画を作成し、影響を局所化しながら本リポジトリのルールへ移行
   - 参照: `AI/instructions/existing_app/without_rules/index.md`

## 運用ルール（重要）

- コンテキスト分離: 選択中のモード以外の指示ファイルは参照しない。モード変更が必要な場合は「モード変更」を宣言してから再選択する。
- ドリフト防止: コード変更に伴い `AI/document/application_specification.md` と `AI/document/structure_plan.md` を必ず更新する。更新なしでのコード変更は不可。


## モード選択の宣言（例）

- 「モード1（新規アプリ開発）で進めます」
- 「モード2（既存アプリ・ルール使用中）を選択」
- 「モード3（既存アプリ・ルール未使用）に切り替え」

宣言後、以下の分岐に従います。

---
